import{f as q,g as B,h as G,j as M,o as j,A as $,k as F,l as p,n as f,b as g,p as L,q as R,t as z,r as H}from"./index-e4318794.js";const K="_addition_1uvwc_1",Q={addition:K},V=z('<div><form><span>Addition</span><div class="editable-rows"><div class="row"><div>金额</div><input type="number" placeholder="金额" name="value" required></div><div class="row"><div>类型</div><select name="type"><option>支出</option><option>收入</option><option>削减预算</option><option>补充预算</option></select></div><div class="row"><div>用途分类</div><fieldset><legend>请选择该资金的用途：</legend><div class="usetype-box"><input type="radio" id="eat" name="useType" value="餐饮"><label for="eat">餐饮</label></div><div class="usetype-box"><input type="radio" id="transportation" name="useType" value="交通费"><label for="transportation ">交通费</label></div><div class="usetype-box"><input type="radio" id="other" name="useType"><label for="other ">其他:</label><input type="text"></div></fieldset></div><div class="row"><div>备注</div><textarea rows="4" placeholder="备注" name="remake"></textarea></div></div><div class="row footer"><button type="button">取消</button><button type="submit">确认'),W=()=>{let i;const m=q(),[c]=B(),[y,{setCounter:S}]=G(),[x,h]=M(),D=l=>{l.preventDefault();const n=new Date;let{total:a,balance:t}=y();const e={};for(const d of new FormData(i)){console.log(d);const[r,u]=d;e[r]=u}(e.type===`${$}`||e.type===`${p}`)&&(t-=Number(e.value)||0,e.type===`${p}`&&(a-=Number(e.value)||0)),e.type===`${f}`&&(a+=Number(e.value)||0,t+=Number(e.value)||0);const s=localStorage.getItem(`${c().id}_ADDITION`),o=s?JSON.parse(s):{};o[n.getTime()]=e,S({userId:c().id,balance:t,total:a}),localStorage.setItem(`${c().id}_ADDITION`,JSON.stringify(o)),m("/detail",{replace:!0})};return j(()=>{i&&(i.onsubmit=D)}),(()=>{const l=V(),n=l.firstChild,a=n.firstChild,t=a.nextSibling,e=t.firstChild,s=e.nextSibling,o=s.firstChild,d=o.nextSibling,r=d.firstChild,u=r.nextSibling,v=u.nextSibling,T=v.nextSibling,C=s.nextSibling,w=C.firstChild,N=w.nextSibling,A=N.firstChild,E=A.nextSibling,I=E.nextSibling,O=I.nextSibling,_=O.firstChild,U=_.nextSibling,k=U.nextSibling,P=t.nextSibling,Y=P.firstChild,b=i;return typeof b=="function"?H(b,n):i=n,r.value=$,u.value=F,v.value=p,T.value=f,k.addEventListener("change",J=>h(J.target.value)),Y.$$click=()=>window.history.go(-1),g(()=>L(l,Q.addition)),g(()=>_.value=x()),l})()},Z=W;R(["click"]);export{Z as default};
